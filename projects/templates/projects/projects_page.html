{% extends "base.html" %}
{% block title %}projects_page{% endblock %}

{% block content %}
  <!-- ✅ Sidebar Filters -->
  <aside class="sidebar">
    <form method="get" id="searchForm">
      <input type="text" name="search" id="searchInput" class="search-input"
             placeholder="Search projects..." value="{{ search_query }}"
             oninput="document.getElementById('searchForm').submit();">

      <h3>Filter</h3>

      <label for="domain">Domain:</label>
      <select name="domain" id="domain" onchange="this.form.submit()">
        <option value="">All</option>
        <option value="Artificial Intelligence" {% if selected_domain == "Artificial Intelligence" %}selected{% endif %}>AI</option>
        <option value="Web Development" {% if selected_domain == "Web Development" %}selected{% endif %}>Web</option>
        <option value="Data" {% if selected_domain == "Data" %}selected{% endif %}>Data</option>
      </select>

      <label for="year">Year:</label>
      <select name="year" id="year" onchange="this.form.submit()">
        <option value="">All</option>
        <option value="2023" {% if selected_year == "2023" %}selected{% endif %}>2023</option>
        <option value="2024" {% if selected_year == "2024" %}selected{% endif %}>2024</option>
        <option value="2025" {% if selected_year == "2025" %}selected{% endif %}>2025</option>
      </select>

      <hr>

      <h3>Sort</h3>
      <select name="sort" onchange="this.form.submit()">
        <option value="newest" {% if selected_sort == "newest" %}selected{% endif %}>Newest</option>
        <option value="oldest" {% if selected_sort == "oldest" %}selected{% endif %}>Oldest</option>
      </select>
    </form>
  </aside>

  <!-- ✅ Project List -->
  <main class="project-list">
    {% if projects %}
      {% for project in projects %}
      <div class="project-box">
        <h3>
          <a href="{% url 'project_detail' pk=project.pk %}" class="font-bold text-purple-800 hover:underline">
            {{ project.title }}
          </a>
        </h3>
        <p><strong>Domain:</strong> {{ project.domain }}</p>
        <p><strong>Year:</strong> {{ project.created.year }}</p>

      </div>
      {% endfor %}
    {% else %}
      <p>No matching projects found.</p>
    {% endif %}
  </main>
{% endblock %}
